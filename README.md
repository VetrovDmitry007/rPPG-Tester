# rPPG Benchmarking & Real-Time Tester

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ rPPG (remote photoplethysmography) ‚Äî —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã —Å–µ—Ä–¥–µ—á–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π (–ß–°–°) –ø–æ –≤–∏–¥–µ–æ –ª–∏—Ü–∞.

## üìÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rppg_project/
‚îú‚îÄ‚îÄ rppg_benchmark/              # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ interfaces.py            # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥–µ–ª–µ–π rPPG
‚îÇ   ‚îú‚îÄ‚îÄ metrics.py               # –ú–µ—Ç—Ä–∏–∫–∏: MAE, RMSE, SNR, Pearson r
‚îÇ   ‚îú‚îÄ‚îÄ datasets.py              # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/–≤–∏–¥–µ–æ + HR
‚îÇ   ‚îú‚îÄ‚îÄ benchmark.py             # –ü—Ä–æ–≥–æ–Ω –º–æ–¥–µ–ª–µ–π –ø–æ –¥–∞—Ç–∞—Å–µ—Ç–∞–º
‚îÇ   ‚îî‚îÄ‚îÄ adapters/
‚îÇ       ‚îî‚îÄ‚îÄ yarppg_adapter.py    # –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ yarppg
‚îÇ
‚îú‚îÄ‚îÄ rppg_tester.py               # –û–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç–µ—Ä –ß–°–° —á–µ—Ä–µ–∑ –≤–µ–±-–∫–∞–º–µ—Ä—É
‚îî‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## üîπ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- **rppg_benchmark** ‚Äî –º–æ–¥—É–ª—å –æ—Ü–µ–Ω–∫–∏ –º–æ–¥–µ–ª–µ–π –ø–æ –¥–∞—Ç–∞—Å–µ—Ç–∞–º (—Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º HR –∏–ª–∏ ppg —Å–∏–≥–Ω–∞–ª–æ–º).
- **rppg_tester.py** ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ –º–æ–¥–µ–ª—å –¥–ª—è –æ–Ω–ª–∞–π–Ω –∏–∑–º–µ—Ä–µ–Ω–∏—è HR –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∫–∞–º–µ—Ä—É.

## üëÅÔ∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥–µ–ª–µ–π: `IRPPGModel`

–õ—é–±–∞—è –º–æ–¥–µ–ª—å rPPG –¥–æ–ª–∂–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Å–º. `interfaces.py`):

```python
class IRPPGModel:
    def reset(self): ...
    def process_frame(self, frame_rgb): ...
    def get_ppg(self): ...
    def get_hr(self, fps): ...  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FFT
```

## üåê –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: –æ—Ñ–ª–∞–π–Ω

```python
from rppg_benchmark.adapters.yarppg_adapter import YarppgAdapter
from rppg_benchmark.datasets import FrameDataset
from rppg_benchmark.benchmark import RPPGBenchmark

model = YarppgAdapter()
dataset = FrameDataset("dataset_frames/")
bench = RPPGBenchmark(dataset, fps=30)

report = bench.evaluate(model)
print(report)
```

## ‚è±Ô∏è –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: –æ–Ω–ª–∞–π–Ω

```bash
python rppg_tester.py                             # –∏—Å–ø–æ–ª—å–∑—É–µ—Ç YarppgAdapter
python rppg_tester.py my_lib.adapters:MyAdapter   # –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å
```

## ‚öñÔ∏è –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (—Ñ–∞–π–ª `metrics.py`)

| –ú–µ—Ç—Ä–∏–∫–∞     | –û–ø–∏—Å–∞–Ω–∏–µ                              |
|-------------|----------------------------------------|
| MAE         | –°—Ä–µ–¥–Ω—è—è –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ (–≤ BPM)      |
| RMSE        | –ö–æ—Ä–µ–Ω—å —Å—Ä–µ–¥–Ω–µ–π –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–π –æ—à–∏–±–∫–∏     |
| Pearson r   | –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É —ç—Ç–∞–ª–æ–Ω–æ–º –∏ –º–æ–¥–µ–ª—å—é    |
| SNR         | –û—Ç–Ω–æ—à–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª/—à—É–º –≤ dB              |

## üìö –§–æ—Ä–º–∞—Ç –¥–∞—Ç–∞—Å–µ—Ç–∞

–§–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤–∏–¥–∞:
```
img_001_hr_73.4.png
```
–ò–∑ –∏–º–µ–Ω–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ HR.

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å: –º–æ–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ –º–æ–¥–µ–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ñ–ª–∞–π–Ω-–±–µ–Ω—á–º–∞—Ä–∫–∞ –∏ –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–≤–µ—Ä–∫–∏

## üìÜ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Python >= 3.9
- OpenCV
- NumPy
- yarppg (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è YarppgAdapter)

## üîç TODO / –ø–ª–∞–Ω—ã

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ –≤ `datasets.py`
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ ppg-—Å–∏–≥–Ω–∞–ª–∞
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CI –∏ unit-—Ç–µ—Å—Ç–æ–≤ –º–æ–¥–µ–ª–µ–π
- [ ] HTML-–æ—Ç—á—ë—Ç—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π

---

‚úåÔ∏è –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö —Ü–µ–ª–µ–π –∞–Ω–∞–ª–∏–∑–∞ rPPG. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–æ–∞–≤—Ç–æ—Ä—ã!


